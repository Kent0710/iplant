import{u as C,f as R}from"./q-DF_DLGXC.js";import{i as O}from"./q-DF_DLGXC.js";import{L as b,t as c,y as m,G as f,v as n,B as g,E,A as I,l as L,x as _}from"./q-6cQxbWGt.js";import{c as w,m as x,r as $}from"./q-B4giyWdZ.js";import"./q-uemlvruI.js";const W=async(a,s)=>{const[v,d,i,u]=C(),{type:r="link",forceReload:l=a===void 0,replaceState:p=!1,scroll:y=!0}=typeof s=="object"?s:{forceReload:s};n.navCount++;const t=i.value.dest,e=a===void 0?t:typeof a=="number"?a:b(a,u.url);if(c.$cbs$&&(l||typeof e=="number"||!m(e,t)||!f(e,t))){const o=n.navCount,S=await Promise.all([...c.$cbs$.values()].map(h=>h(e)));if(o!==n.navCount||S.some(Boolean)){o===n.navCount&&r==="popstate"&&history.pushState(null,"",t);return}}if(typeof e=="number"){history.go(e);return}if(!f(e,t)){location.href=e.href;return}if(!l&&m(e,t)){{r==="link"&&e.href!==location.href&&history.pushState(null,"",e);const o=document.getElementById(g)??document.documentElement;E(r,e,new URL(location.href),o,I()),r==="popstate"&&(window._qCityScrollEnabled=!0)}return}return i.value={type:r,dest:e,forceReload:l,replaceState:p,scroll:y},L(e,R()),_($,x,w,e.pathname),v.value=void 0,u.isNavigating=!0,new Promise(o=>{d.r=o})};export{O as _hW,W as s_AXvIWA40R0o};
